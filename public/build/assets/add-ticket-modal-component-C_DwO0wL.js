import{r as u,u as l,b as k,j as s,s as r}from"./app-SpSkcMcW.js";import{c as w,g as P}from"./tickets-thunk-Dy-doiyc.js";import{W as U,R as N}from"./wysiwyg-B-81IqT9.js";import{I as g}from"./input-DX4djbBn.js";import{S as m}from"./select-BU2tztog.js";import{g as D}from"./it-thunk-59eFzetC.js";import{s as T}from"./app-thunk-PKjJ7sS4.js";import{h as n}from"./moment-C5S46NFB.js";import{D as M}from"./index-VVFzHKaF.js";import{s as R}from"./index-C3fvr3hv.js";import{M as q}from"./index-Bbbl7j70.js";import{U as A}from"./index-fk0UB2TY.js";import{B as E}from"./button-Bv1usZ21.js";import"./ticket-service-CD0dpQXF.js";import"./AntdIcon-Dyayd2_U.js";import"./index-DS-NQI_M.js";import"./PurePanel-BLrhGTLm.js";import"./ContextIsolator-Dc5AUY1w.js";import"./CheckOutlined-Bk6y4FGJ.js";import"./index-D9HJvZn5.js";import"./roundedArrow-BykpEahO.js";import"./index-Dcgl0w8o.js";import"./motion-0bmH3o0f.js";import"./useForceUpdate-CPTcuBPN.js";import"./EyeOutlined-MZuvjIKN.js";function me({isOpen:f,closeModal:p}){const[h,c]=u.useState(!1),{RangePicker:x}=M,[e,i]=u.useState({status:"Pending"}),{users:v}=l(t=>t.it),{user:d}=l(t=>t.app);k();const[y,b]=R.useMessage(),{allCategories:j}=l(t=>t.category);function L(t){return!(t==null?void 0:t.some(o=>o.status!=="done"))}const _=e.scsite==="Carcar Site"?115:0;async function C(t){t.preventDefault(),c(!0);const a=new FormData;if(a.append("assigned_to",_??""),a.append("category_id",e.category_id??""),a.append("details",e.details??""),a.append("station",e.station??""),a.append("scsite",e.scsite??""),a.append("status",e.status??""),a.append("isUrgent",e.isUrgent??""),a.append("user_id",d.id??""),a.append("start",(e==null?void 0:e.start)??n().format("LLLL")??""),a.append("end",(e==null?void 0:e.end)??n().format("LLLL")??""),L(e.files)&&e.files)for(let o=0;o<e.files.length;o++)e.files[o].name!=="uploaded"&&e.files[o].status=="done"&&a.append("files[]",e.files[o].originFileObj);await r.dispatch(w(a)),await r.dispatch(D(2)),await r.dispatch(P(d)),await r.dispatch(T(a)),await y.success("Created Successfully!"),i({}),p(),c(!1)}const S=["San Carlos 2nd Site","San Carlos 3rd Site","Carcar Site"];return console.log("usersss",v),s.jsxs(s.Fragment,{children:[b,s.jsx(q,{title:"Ticket Information",okText:"Submit",onOk:C,confirmLoading:h,open:f,onCancel:p,children:s.jsxs("form",{className:"max-w-full mx-auto mt-4 ",children:[s.jsxs("div",{className:"grid md:gap-6",children:[s.jsx(m,{value:e.category_id,label:"Category",name:"category_id",required:"true",onChange:t=>i({...e,category_id:t.target.value}),options:j.map(t=>({label:t.name,value:t.id}))}),e.category_id=="Others"&&s.jsx(g,{onChange:t=>i({...e,others:t.target.value}),value:e.others??"",required:"true",name:"others",label:"Other Request",type:"text"})]}),s.jsx("div",{className:"grid md:gap-6 mt-4 ",children:s.jsx(x,{onChange:t=>i({...e,start:n(t[0].$d).format("LLLL"),end:n(t[1].$d).format("LLLL")}),showTime:!0})}),s.jsx("div",{className:"grid md:gap-6 mt-4 ",children:s.jsx(U,{onChange:t=>i({...e,details:t}),value:(e==null?void 0:e.details)??"",label:"Request Details"})}),s.jsx("div",{className:"grid md:gap-6 mt-9 mb-7 ",children:s.jsx(g,{onChange:t=>i({...e,station:t.target.value}),value:e.station??"",name:"station",label:"PC/Station No.",type:"text"})}),s.jsx("div",{className:"relative z-0 w-full mb-6 group mt-4 ",children:s.jsx(m,{value:e.scsite,label:"Site",name:"scsite",onChange:t=>i({...e,scsite:t.target.value}),options:S.map(t=>({label:t,value:t}))})}),s.jsx(A,{onChange:t=>i({...e,files:t.fileList}),multiple:!0,action:"https://660d2bd96ddfa2943b33731c.mockapi.io/api/upload",listType:"picture",method:"GET",className:"upload-list-inline",children:s.jsx(E,{icon:s.jsx(N,{}),children:"Upload"})}),s.jsx("div",{class:"flex items-center my-4",children:s.jsx(m,{value:e==null?void 0:e.isUrgent,label:"Urgent Type",name:"isUrgent",onChange:t=>i({...e,isUrgent:t.target.value}),options:[{label:"Low Priority",value:"Low Priority"},{label:"Medium Priority",value:"Medium Priority"},{label:"High Priority",value:"High Priority"}].map(t=>({label:t.label,value:t.value}))})})]})})]})}export{me as default};
