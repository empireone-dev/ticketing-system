import{r as k,R as f,u as B,s as $,j as a}from"./app-BvsxefeZ.js";import A from"./dashboard-card-section-DoYm-SkA.js";import V from"./dashboard-line-chart-section-DZd79v-e.js";import{F as O,D as U}from"./dashboard-it-filtering-section-CB_KcDV_.js";import{a as q}from"./category-thunk-DKCmyPPS.js";import G from"./category-chart-section-lgqMZzad.js";import{F as N}from"./TicketIcon-oY37qZIm.js";import"./it-daily-filtering-chart-section-BjMf8m_f.js";import"./it-monthly-filtering-chart-section-BfImJExc.js";import"./it-weekly-filtering-chart-section copy-CMqi44bE.js";function C(n){return n*Math.PI/180}function R(n,t,e){return n>e?e:n<t?t:n}function D(n,t){return t/100*n}function W(n,t){return n+t/2}function F(n,t){var e=C(n);return{dx:t*Math.cos(e),dy:t*Math.sin(e)}}function I(n){return typeof n=="number"}function b(n,t){return typeof n=="function"?n(t):n}function H(n){for(var t=0,e=0;e<n.length;e++)t+=n[e].value;return t}function J(n){for(var t=n.data,e=n.lengthAngle,i=n.totalValue,r=n.paddingAngle,s=n.startAngle,o=i||H(t),u=R(e,-360,360),l=Math.abs(u)===360?t.length:t.length-1,c=Math.abs(r)*Math.sign(e),d=c*l,m=u-d,g=0,v=[],h=0;h<t.length;h++){var y=t[h],P=o===0?0:y.value/o*100,S=D(m,P),x=g+s;g=g+S+c,v.push(Object.assign({percentage:P,startAngle:x,degrees:S},y))}return v}function L(n,t){if(n==null)return{};var e={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(t.includes(i))continue;e[i]=n[i]}return e}var K=["dataEntry","dataIndex"];function X(n){var t=n.renderLabel,e=n.labelProps,i=t(e);if(typeof i=="string"||typeof i=="number"){e.dataEntry,e.dataIndex;var r=L(e,K);return f.createElement("text",Object.assign({dominantBaseline:"central"},r),i)}return f.isValidElement(i)?i:null}function Y(n){var t=1e14;return Math.round((n+Number.EPSILON)*t)/t}function Q(n){var t=n.labelPosition,e=n.lineWidth,i=n.labelHorizontalShift,r=Y(i);if(r===0)return"middle";if(t>100)return r>0?"start":"end";var s=100-e;return t<s?r>0?"end":"start":"middle"}function Z(n,t){return n.map(function(e,i){var r,s=(r=b(t.segmentsShift,i))!=null?r:0,o=D(t.radius,t.labelPosition)+s,u=F(W(e.startAngle,e.degrees),o),l=u.dx,c=u.dy,d={x:t.center[0],y:t.center[1],dx:l,dy:c,textAnchor:Q({labelPosition:t.labelPosition,lineWidth:t.lineWidth,labelHorizontalShift:l}),dataEntry:e,dataIndex:i,style:b(t.labelStyle,i)};return d})}function _(n,t){var e=t.label;if(e)return Z(n,t).map(function(i,r){return f.createElement(X,{key:"label-"+(i.dataEntry.key||r),renderLabel:e,labelProps:i})})}function ee(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var M,p;function te(){if(p)return M;p=1;var n=function(e,i,r,s,o){var u=o-s;if(u===0)return[];var l=r*Math.cos(s)+e,c=r*Math.sin(s)+i,d=r*Math.cos(o)+e,m=r*Math.sin(o)+i,g=Math.abs(u)<=Math.PI?"0":"1",v=u<0?"0":"1";return[["M",l,c],["A",r,r,0,g,v,d,m]]};return M=n,M}var ne=te(),ae=ee(ne),ie=["cx","cy","lengthAngle","lineWidth","radius","shift","reveal","rounded","startAngle","title"];function le(n,t,e,i,r){var s=R(i,-359.999,359.999);return ae(n,t,r,C(e),C(e+s)).map(function(o){return o.join(" ")}).join(" ")}function E(n){var t=n.cx,e=n.cy,i=n.lengthAngle,r=n.lineWidth,s=n.radius,o=n.shift,u=o===void 0?0:o,l=n.reveal,c=n.rounded,d=n.startAngle,m=n.title,g=L(n,ie),v=s-r/2,h=F(W(d,i),u),y=h.dx,P=h.dy,S=le(t+y,e+P,d,i,v),x,w;if(I(l)){var z=C(v)*i;x=Math.abs(z),w=x-D(x,l)}return f.createElement("path",Object.assign({d:S,fill:"none",strokeWidth:r,strokeDasharray:x,strokeDashoffset:w,strokeLinecap:c?"round":void 0},g),m&&f.createElement("title",null,m))}function re(n,t,e){var i="stroke-dashoffset "+n+"ms "+t;return e&&e.transition&&(i=i+","+e.transition),{transition:i}}function se(n){var t=n.reveal,e=n.animate;return e&&!I(t)?100:t}function j(n,t){return n&&function(e){n(e,t)}}function ce(n,t,e){var i=e??se(t),r=t.radius,s=t.center,o=s[0],u=s[1],l=D(r,t.lineWidth),c=n.map(function(d,m){var g=b(t.segmentsStyle,m);return f.createElement(E,{cx:o,cy:u,key:d.key||m,lengthAngle:d.degrees,lineWidth:l,radius:r,rounded:t.rounded,reveal:i,shift:b(t.segmentsShift,m),startAngle:d.startAngle,title:d.title,style:Object.assign({},g,t.animate&&re(t.animationDuration,t.animationEasing,g)),stroke:d.color,tabIndex:t.segmentsTabIndex,onBlur:j(t.onBlur,m),onClick:j(t.onClick,m),onFocus:j(t.onFocus,m),onKeyDown:j(t.onKeyDown,m),onMouseOver:j(t.onMouseOver,m),onMouseOut:j(t.onMouseOut,m)})});return t.background&&c.unshift(f.createElement(E,{cx:o,cy:u,key:"bg",lengthAngle:t.lengthAngle,lineWidth:l,radius:r,rounded:t.rounded,startAngle:t.startAngle,stroke:t.background})),c}var T={animationDuration:500,animationEasing:"ease-out",center:[50,50],data:[],labelPosition:50,lengthAngle:360,lineWidth:100,paddingAngle:0,radius:50,startAngle:0,viewBoxSize:[100,100]};function oe(n){var t=Object.assign({},T,n),e;for(e in T)n[e]===void 0&&(t[e]=T[e]);return t}function ue(n){var t=oe(n),e=k.useState(t.animate?0:null),i=e[0],r=e[1];k.useEffect(function(){t.animate&&r(null)},[]);var s=J(t);return f.createElement("svg",{viewBox:"0 0 "+t.viewBoxSize[0]+" "+t.viewBoxSize[1],width:"100%",height:"100%",className:t.className,style:t.style},ce(s,t,i),_(s,t),t.children)}function Pe(){var u;const[n,t]=k.useState(null),{dashboard:e}=B(l=>l.admin),i=(l,c,d)=>{console.log("Clicked segment:",c)},[r,s]=k.useState(null),o=l=>{const c=JSON.parse(l);s(c)};return k.useEffect(()=>{$.dispatch(q())},[]),console.log("dashboardss",e==null?void 0:e.pending),a.jsxs("div",{className:"flex flex-col gap-8",children:[a.jsxs("div",{className:"flex flex-wrap gap-7 rounded-md",children:[a.jsx(A,{icon:a.jsx(N,{className:"h-12 text-white"}),title:`Pending Tickets: ${(e==null?void 0:e.pending)??0}`,href:"Go To Pending Tickets Section",link:"/admin/tickets?page=1&search=Pending"}),a.jsx(A,{icon:a.jsx(N,{className:"h-12 text-white"}),title:`Urgent Tickets: ${(e==null?void 0:e.urgent)??0}`,href:"Go To Urgent Tickets Section",link:"/admin/tickets?page=1&search=isUrgent"}),a.jsx(A,{icon:a.jsx(N,{className:"h-12 text-white"}),title:`Ongoing/Assigned Tickets: ${(e==null?void 0:e.assigned)??0}`,href:"Go To Ongoing/Assigned Tickets Section",link:"/admin/tickets?page=1&search=Assigned"}),a.jsx(A,{icon:a.jsx(N,{className:"h-12 text-white"}),title:`Closed Tickets: ${(e==null?void 0:e.closed)??0}`,href:"Go To Closed Tickets Section",link:"/admin/tickets?page=1&search=Closed"})]}),a.jsxs("div",{children:[a.jsx("center",{children:a.jsxs("div",{className:"flex flex-1 gap-9 ",children:[a.jsxs("div",{className:" p-3 rounded-lg w-full shadow-2xl",children:[a.jsxs("div",{className:"flex text-3xl font-bold mb-3 p-3",children:[a.jsx(O,{className:"size-10"}),"Tickets Status Inquiry Chart"]}),a.jsxs("div",{className:"flex w-full items-start justify-center",children:[a.jsxs("div",{className:"flex flex-1 flex-col gap-0.5 text-md",children:[a.jsxs("div",{className:"flex items-center text-yellow-400",children:[a.jsx("div",{className:"ml-1",children:"Pending:"}),a.jsx("div",{className:"ml-1 text-md",children:(e==null?void 0:e.pending)??0})]}),a.jsxs("div",{className:"flex text-[#e86100] items-center",children:[a.jsx("div",{className:"ml-1",children:"Urgent:"}),a.jsx("div",{className:"ml-1 text-md",children:(e==null?void 0:e.urgent)??0})]}),a.jsxs("div",{className:"flex text-blue-400 items-center",children:[a.jsx("div",{className:"ml-1",children:"Assigned:"}),a.jsx("div",{className:"ml-1 text-md",children:(e==null?void 0:e.assigned)??0})]})]}),a.jsxs("div",{className:"flex flex-1 flex-col gap-0.5 text-md",children:[a.jsxs("div",{className:"flex text-green-600 items-center",children:[a.jsx("div",{className:"ml-1",children:"Closed:"}),a.jsx("div",{className:"ml-1 text-md",children:(e==null?void 0:e.closed)??0})]}),a.jsxs("div",{className:"flex text-[#ff0000] items-center",children:[a.jsx("div",{className:"ml-1",children:"Declined:"}),a.jsx("div",{className:" ml-1 text-md",children:(e==null?void 0:e.declined)??0})]})]})]}),a.jsxs("div",{className:"mb-2 mt-3 flex flex-1 justify-start items-start",children:["Total Tickets:",(e==null?void 0:e.total)??0]}),a.jsx(ue,{style:{height:"300px"},lineWidth:55,animate:!0,animationDuration:1e3,label:({dataEntry:l})=>`${Math.round(l.percentage)}%`,labelStyle:l=>({fill:"black",fontSize:"7px",fontFamily:"sans-serif",transform:l===n?"scale(1.1)":"scale(1)",transition:"transform 0.3s"}),labelPosition:74,paddingAngle:1.8,onMouseOver:(l,c,d)=>{t(c)},onMouseOut:()=>{t(null)},onClick:(l,c,d)=>{i(l,c)},data:[{title:"Urgent",value:(e==null?void 0:e.urgent)??0,color:"#e86100"},{title:"Closed",value:(e==null?void 0:e.closed)??0,color:"#009e60"},{title:"Assigned",value:(e==null?void 0:e.assigned)??0,color:"#4299E1"},{title:"Pending",value:(e==null?void 0:e.pending)??0,color:"#FFFF00"},{title:"Declined",value:(e==null?void 0:e.declined)??0,color:"#ff0000"}].filter(l=>l.value>0),segmentsStyle:l=>({transition:"transform 0.3s",transform:l===n?"scale(1.1)":"scale(1)"})})]}),a.jsx("div",{className:"w-full",children:a.jsx(G,{})})]})}),a.jsxs("div",{className:"mb-10",children:[a.jsxs("div",{className:"flex text-3xl items-center justify-center text-gray-900 font-bold mb-3 mt-6 p-3",children:[a.jsx(O,{className:"size-10"}),"IT Personnel Tickets Data Inquiry"]}),a.jsxs("select",{className:"w-full flex items-center justify-center ",onChange:l=>o(l.target.value),children:[a.jsx("option",{children:"Select an IT Personnel"}),(u=e==null?void 0:e.data)==null?void 0:u.map((l,c)=>a.jsx("option",{value:JSON.stringify(l),children:l==null?void 0:l.name},c))]}),a.jsx("div",{children:r&&a.jsxs(a.Fragment,{children:[a.jsx(V,{data:r}),a.jsx(U,{data:r})]})})]})]})]})}export{Pe as default};
