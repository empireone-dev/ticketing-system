var j=Object.defineProperty;var S=(t,e,n)=>e in t?j(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var d=(t,e,n)=>S(t,typeof e!="symbol"?e+"":e,n);import{r as h,R as g,j as u,s as _}from"./app-AgT5TB4z.js";import{h as L}from"./moment-C5S46NFB.js";import{f as D}from"./tickets-thunk-DvSAVAlt.js";import{D as A}from"./index-Dw7q5MZ4.js";import{I,_ as P}from"./AntdIcon-Bl93TFf8.js";import"./ticket-service-UpIfqeMo.js";import"./PurePanel-DeklmeR1.js";import"./ContextIsolator-BbJO7qHI.js";import"./button-9KIdYm7W.js";import"./index-B5LlO03B.js";import"./CheckOutlined-DnJEy8xG.js";import"./index-BqT55qqi.js";import"./roundedArrow-Bx5oMN0O.js";var U={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M624 706.3h-74.1V464c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v242.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.7a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-download",theme:"outlined"},$=function(e,n){return h.createElement(I,P({},e,{ref:n,icon:U}))},N=h.forwardRef($);const B=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent),b=t=>Array.isArray(t)&&t.every(e=>typeof e=="object"&&!(e instanceof Array)),V=t=>Array.isArray(t)&&t.every(e=>Array.isArray(e)),H=t=>Array.from(t.map(e=>Object.keys(e)).reduce((e,n)=>new Set([...e,...n]),[])),W=(t,e)=>{e=e||H(t);let n=e,r=e;b(e)&&(n=e.map(s=>s.label),r=e.map(s=>s.key));const a=t.map(s=>r.map(o=>M(o,s)));return[n,...a]},M=(t,e)=>{const n=t.replace(/\[([^\]]+)]/g,".$1").split(".").reduce(function(r,a,s,o){const c=r[a];if(c==null)o.splice(1);else return c},e);return n===void 0?t in e?e[t]:"":n},Y=t=>typeof t>"u"||t===null?"":t,v=(t,e=",",n='"')=>t.filter(r=>r).map(r=>r.map(a=>Y(a)).map(a=>`${n}${a}${n}`).join(e)).join(`
`),q=(t,e,n,r)=>v(e?[e,...t]:t,n,r),z=(t,e,n,r)=>v(W(t,e),n,r),G=(t,e,n,r)=>e?`${e.join(n)}
${t}`:t.replace(/"/g,'""'),k=(t,e,n,r)=>{if(b(t))return z(t,e,n,r);if(V(t))return q(t,e,n,r);if(typeof t=="string")return G(t,e,n);throw new TypeError('Data should be a "String", "Array of arrays" OR "Array of objects" ')},C=(t,e,n,r,a)=>{const s=k(t,n,r,a),o=B()?"application/csv":"text/csv",c=new Blob([e?"\uFEFF":"",s],{type:o}),p=`data:${o};charset=utf-8,${e?"\uFEFF":""}${s}`,i=window.URL||window.webkitURL;return typeof i.createObjectURL>"u"?p:i.createObjectURL(c)};var R={exports:{}},J="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",K=J,Q=K;function w(){}function x(){}x.resetWarningCache=w;var X=function(){function t(r,a,s,o,c,p){if(p!==Q){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:x,resetWarningCache:w};return n.PropTypes=n,n};R.exports=X();var l=R.exports;const F={data:l.oneOfType([l.string,l.array,l.func]).isRequired,headers:l.array,target:l.string,separator:l.string,filename:l.string,uFEFF:l.bool,onClick:l.func,asyncOnClick:l.bool,enclosingCharacter:l.string},T={separator:",",filename:"generatedBy_react-csv.csv",uFEFF:!0,asyncOnClick:!1,enclosingCharacter:'"'},Z={target:"_blank"};class y extends g.Component{constructor(e){super(e),this.state={}}buildURI(){return C(...arguments)}componentDidMount(){const{data:e,headers:n,separator:r,enclosingCharacter:a,uFEFF:s,target:o,specs:c,replace:p}=this.props;this.state.page=window.open(this.buildURI(e,s,n,r,a),o,c,p)}getWindow(){return this.state.page}render(){return null}}d(y,"defaultProps",Object.assign(T,Z)),d(y,"propTypes",F);var f;let ee=(f=class extends g.Component{constructor(e){super(e),this.buildURI=this.buildURI.bind(this)}buildURI(){return C(...arguments)}handleLegacy(e,n=!1){if(window.navigator.msSaveOrOpenBlob){e.preventDefault();const{data:r,headers:a,separator:s,filename:o,enclosingCharacter:c,uFEFF:p}=this.props,i=n&&typeof r=="function"?r():r;let m=new Blob([p?"\uFEFF":"",k(i,a,s,c)]);return window.navigator.msSaveBlob(m,o),!1}}handleAsyncClick(e){const n=r=>{if(r===!1){e.preventDefault();return}this.handleLegacy(e,!0)};this.props.onClick(e,n)}handleSyncClick(e){if(this.props.onClick(e)===!1){e.preventDefault();return}this.handleLegacy(e)}handleClick(){return e=>{if(typeof this.props.onClick=="function")return this.props.asyncOnClick?this.handleAsyncClick(e):this.handleSyncClick(e);this.handleLegacy(e)}}render(){const{data:e,headers:n,separator:r,filename:a,uFEFF:s,children:o,onClick:c,asyncOnClick:p,enclosingCharacter:i,...m}=this.props,O=typeof window>"u"?"":this.buildURI(e,s,n,r,i);return u.jsx("a",{download:a,...m,ref:E=>this.link=E,target:"_self",href:O,onClick:this.handleClick(),children:o})}},d(f,"defaultProps",T),d(f,"propTypes",F),f);const te=ee,{RangePicker:ne}=A;function ve(){const[t,e]=h.useState([]),[n,r]=h.useState(!1);async function a(s,o){r(!0);const c={start:s,end:o},p=await _.dispatch(D(c));e(p.data.result.map(i=>({"Ticket ID":i.ticket_id,"Request To":i.user.name,"Assigned To":i.assigned_to.name,Details:i.details,Status:i.status}))),r(!1)}return u.jsxs("div",{className:"flex gap-3 h-10",children:[u.jsx(ne,{format:"MM-DD-YYYY",onChange:(s,o)=>{a(o[0],o[1])}}),u.jsx("div",{children:u.jsx("button",{disabled:n,className:" bg-blue-500 p-2 rounded-md text-white hover:bg-blue-600 ",children:u.jsx(te,{asyncOnClick:!0,filename:"ticketing-system"+L().format("LL")+".csv",data:t,children:u.jsxs("div",{className:"flex gap-2",children:[u.jsx(N,{}),n?"Loading...":u.jsx(u.Fragment,{children:"GENERATE"})]})})})})]})}export{ve as default};
